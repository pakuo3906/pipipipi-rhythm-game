# 🎵 Pipipipi Rhythm Game v2.0

**シンプルかつリッチなエフェクトを楽しめるウェブ埋め込み対応リズムゲーム**

## 🎮 ゲーム概要

「ぴぴぴ… しんごう…」(pa9wo) の楽曲に合わせて演奏するクラシック落下ノート型リズムゲーム。  
Context7で最新のWeb Audio APIとCanvas-Confettiライブラリを活用し、シンプルながらもリッチなビジュアルエフェクトを実現。

## ✨ 特徴

### 🎨 リッチなビジュアルエフェクト
- **音楽連動背景エフェクト**: リアルタイム音楽解析による背景の脈動
- **レーン発光システム**: ノートヒット時のレーンの光る演出
- **Canvas-Confetti**: Perfect判定時の華やかな紙吹雪エフェクト
- **パーティクルシステム**: 判定に応じた色とりどりの粒子エフェクト
- **リップル効果**: 判定ライン上の波紋エフェクト
- **音楽スペクトラム**: 背景に表示される音楽の周波数可視化

### 🎯 ゲームシステム
- **3レーン**: A/S/D レーン対応
- **判定システム**: PERFECT/GOOD/MISS の3段階判定
- **コンボシステム**: 連続成功でスコア倍率アップ
- **音量調整**: ゲーム中にリアルタイムで音量調整可能
- **レスポンシブ対応**: デスクトップ・モバイル両対応

### 🌐 埋め込み対応
- **完全軽量化**: 依存関係を最小限に抑制
- **コンパクトUI**: 小さな画面でも快適にプレイ
- **iframe対応**: ウェブサイトへの簡単埋め込み

## 🚀 起動方法

### 通常版
```bash
# ローカルサーバー起動
python3 -m http.server 8000

# ブラウザで開く
# http://localhost:8000/index.html
```

### 埋め込み版
```bash
# 埋め込み用ファイルを開く
# http://localhost:8000/embed.html
```

### ウェブサイト埋め込み
```html
<iframe 
    src="http://localhost:8000/embed.html" 
    width="800" 
    height="600" 
    frameborder="0">
</iframe>
```

## 🎹 操作方法

### キーボード
- **A**: 左レーン
- **S**: 中央レーン  
- **D**: 右レーン
- **Space**: ポーズ/再開
- **R**: リトライ

### マウス・タッチ
- **画面分割タップ**: 各レーンをタップして演奏
- **直感的操作**: 説明不要の簡単操作

## 📁 ファイル構成

```
pipipipi-rhythm-game/
├── index.html          # メインゲーム
├── embed.html          # 埋め込み用コンパクト版
├── game.js             # ゲームエンジン
├── pipipipi_shingou.mp3 # 音楽ファイル
├── README.md           # このファイル
└── backup/             # v1.0バックアップ
    └── v1_beat_slice_initial/
        └── pipipipi_shingou_chart.json
```

## 🛠️ 技術スタック

- **HTML5 Canvas**: 高速2D描画
- **Web Audio API**: 音楽再生とリアルタイム解析
- **Canvas-Confetti**: 紙吹雪エフェクト
- **Vanilla JavaScript**: 依存関係なし (30KB未満)
- **CSS3**: レスポンシブUI

## 🎨 エフェクトシステム

### 音楽連動エフェクト
- **背景パルス**: 音楽の強弱に応じた背景の脈動
- **スペクトラム可視化**: 音楽周波数の視覚化
- **BPM同期**: 150BPMに合わせたアニメーション

### ビジュアルエフェクト
- **レーン発光**: ヒット時のレーンの光る演出
- **リップル効果**: 判定ライン上の波紋
- **パーティクル**: 判定に応じた色とりどりの粒子
- **Canvas-Confetti**: Perfect時の華やかな紙吹雪

## 📊 パフォーマンス

- **60FPS**: 滑らかな60fpsアニメーション
- **軽量**: 総サイズ30KB未満
- **高速**: requestAnimationFrame使用
- **最適化**: オブジェクトプール採用

## 🌐 対応環境

- **デスクトップ**: Chrome, Firefox, Safari, Edge
- **モバイル**: iOS Safari, Android Chrome
- **埋め込み**: iframe, 直接埋め込み対応

## 🎯 Context7活用

### 最新技術情報の取得
- **Web Audio API**: 最新の音楽解析技術
- **Canvas-Confetti**: 最新のパーティクルエフェクト
- **最適化手法**: 最新のパフォーマンス最適化

### 実装のベストプラクティス
- **モジュール設計**: 保守性を考慮した設計
- **エラーハンドリング**: 堅牢なエラー処理
- **アクセシビリティ**: 幅広いデバイス対応

## 🎵 楽曲情報

- **タイトル**: ぴぴぴ… しんごう…
- **アーティスト**: pa9wo  
- **長さ**: 217.87秒
- **BPM**: 150
- **ノート数**: 222個

## 📝 開発履歴

### v2.0 (2025-07-09)
- シンプルかつリッチなエフェクトを重視した設計
- Context7を活用した最新技術の導入
- 埋め込み対応の完全実装
- Canvas-Confettiによる華やかなエフェクト

### v1.0 (バックアップ)
- Three.js + Tone.jsによる3D実装
- 複雑な機能を持つが期待と異なる結果
- backup/v1_beat_slice_initial/ に保存

## 🎉 今後の展望

- **追加楽曲**: 他の楽曲への対応
- **カスタマイズ**: テーマ・エフェクト設定
- **ソーシャル**: スコア共有機能
- **モード追加**: 難易度調整機能

---

*🎵 音楽に合わせて、リッチなエフェクトと共に最高のリズム体験を楽しんでください！*